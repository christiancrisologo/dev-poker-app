(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55311,e=>{"use strict";e.s(["default",()=>t]);let t={set(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.warn("#localstorage error ",e)}},get(e){try{let t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(e){return console.warn("#localstorage error ",e),null}},remove(e){try{localStorage.removeItem(e)}catch(e){console.warn("#localstorage error ",e)}},clear(){try{localStorage.clear()}catch(e){console.warn("#localstorage error ",e)}}}},6085,e=>{"use strict";e.s(["Headers",()=>o,"Request",()=>n,"Response",()=>a,"default",()=>s,"fetch",()=>r]);var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g;let r=t.fetch,s=t.fetch.bind(t),o=t.Headers,n=t.Request,a=t.Response},18566,(e,t,r)=>{t.exports=e.r(76562)},92760,e=>{"use strict";e.s(["createSession",()=>s,"createUser",()=>n,"getSessionByInviteCode",()=>o,"getUser",()=>a,"signIn",()=>r]);var t=e.i(84515);async function r(e,r){return t.supabase.auth.signInWithPassword({email:e,password:r})}async function s(e){let{name:r,invite_code:s,moderator_id:o}=e;return t.supabase.from("poker_sessions").insert({name:r,invite_code:s,moderator_id:o}).select("invite_code")}async function o(e){return t.supabase.from("poker_sessions").select("id").eq("invite_code",e).single()}async function n(e){let{username:r}=e;return t.supabase.from("poker_users").insert({username:r})}async function a(e){return t.supabase.from("poker_users").select("*").eq("username",e)}},51529,e=>{"use strict";e.s(["default",()=>a]);var t=e.i(43476),r=e.i(71645),s=e.i(18566),o=e.i(92760),n=e.i(55311);function a(){let[e,a]=(0,r.useState)(!1),[l,i]=(0,r.useState)(null),[u,c]=(0,r.useState)(""),[d,m]=(0,r.useState)(""),[f,g]=(0,r.useState)(""),[p,b]=(0,r.useState)(null),h=(0,s.useRouter)();(0,r.useEffect)(()=>{var e;let t=n.default.get("poker-user");g(null!=(e=null==t?void 0:t.username)?e:"")},[]);let v=async e=>{var t;if(e.preventDefault(),a(!0),i(null),!u.trim()){i("Session name is required"),a(!1);return}let r=n.default.get("poker-user");if(!(null==r?void 0:r.id)){i("Moderator ID is missing. Please log in again."),a(!1);return}let s=Math.random().toString(36).substring(2,8).toUpperCase(),{data:l,error:c}=await (0,o.createSession)({name:u,invite_code:s,moderator_id:r.id});if(c){i(c.message),a(!1);return}a(!1),h.push("/session/".concat((null==l||null==(t=l[0])?void 0:t.invite_code)||s))},x=async e=>{if(e.preventDefault(),b(null),a(!0),!d.trim()){b("Invite code is required"),a(!1);return}let{data:t,error:r}=await (0,o.getSessionByInviteCode)(d);if(r||!t){b("Session not found."),a(!1);return}a(!1),h.push("/session/".concat(d))};return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-900 via-purple-900 to-blue-900",children:(0,t.jsxs)("div",{className:"bg-[#181f3a] p-10 sm:p-12 rounded-2xl shadow-2xl w-full max-w-xl text-center border border-blue-900/40",children:[(0,t.jsxs)("h2",{className:"text-3xl font-extrabold mb-6 text-white drop-shadow-lg",children:["Welcome, ",f||"User","!"]}),(0,t.jsx)("p",{className:"mb-8 text-blue-200 text-lg",children:"You are registered. Create or join a session below."}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("form",{onSubmit:v,className:"mb-4",children:[(0,t.jsx)("input",{type:"text",placeholder:"Session Name",value:u,onChange:e=>c(e.target.value),className:"w-full mb-4 p-3 rounded-lg bg-[#232a4d] text-white border border-blue-900/30 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0}),(0,t.jsx)("button",{type:"submit",className:"w-full py-3 rounded-lg bg-gradient-to-r from-yellow-400 to-orange-400 text-gray-900 font-semibold shadow hover:from-yellow-500 hover:to-orange-500 transition",disabled:e,children:e?"Creating...":"Create Session"}),l&&(0,t.jsx)("p",{className:"text-red-500 mt-4",children:l})]}),(0,t.jsxs)("form",{onSubmit:x,children:[(0,t.jsx)("input",{type:"text",placeholder:"Invite Code",value:d,onChange:e=>m(e.target.value.toUpperCase()),className:"w-full mb-4 p-3 rounded-lg bg-[#232a4d] text-white border border-blue-900/30 focus:outline-none focus:ring-2 focus:ring-cyan-500 uppercase",required:!0}),(0,t.jsx)("button",{type:"submit",className:"w-full py-3 rounded-lg bg-gradient-to-r from-cyan-400 to-blue-400 text-white font-semibold shadow hover:from-cyan-500 hover:to-blue-500 transition",disabled:e,children:e?"Joining...":"Join Session"}),p&&(0,t.jsx)("p",{className:"text-red-500 mt-4",children:p})]})]})]})})}},11737,e=>{e.v(e=>Promise.resolve().then(()=>e(6085)))}]);