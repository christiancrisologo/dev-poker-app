(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55311,e=>{"use strict";e.s(["default",()=>t]);let t={set(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.warn("#localstorage error ",e)}},get(e){try{let t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(e){return console.warn("#localstorage error ",e),null}},remove(e){try{localStorage.removeItem(e)}catch(e){console.warn("#localstorage error ",e)}},clear(){try{localStorage.clear()}catch(e){console.warn("#localstorage error ",e)}}}},6085,e=>{"use strict";e.s(["Headers",()=>n,"Request",()=>s,"Response",()=>a,"default",()=>o,"fetch",()=>r]);var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g;let r=t.fetch,o=t.fetch.bind(t),n=t.Headers,s=t.Request,a=t.Response},18566,(e,t,r)=>{t.exports=e.r(76562)},92760,e=>{"use strict";e.s(["createSession",()=>o,"createUser",()=>s,"getSessionByInviteCode",()=>n,"getUser",()=>a,"signIn",()=>r]);var t=e.i(84515);async function r(e,r){return t.supabase.auth.signInWithPassword({email:e,password:r})}async function o(e){let{name:r,invite_code:o,moderator_id:n}=e;return t.supabase.from("poker_sessions").insert({name:r,invite_code:o,moderator_id:n}).select("invite_code")}async function n(e){return t.supabase.from("poker_sessions").select("id").eq("invite_code",e).single()}async function s(e){let{username:r}=e;return t.supabase.from("poker_users").insert({username:r})}async function a(e){return t.supabase.from("poker_users").select("*").eq("username",e)}},17360,e=>{"use strict";let t;e.s(["default",()=>d],17360);var r=e.i(43476),o=e.i(71645),n=e.i(18566);let s={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},a=new Uint8Array(16),l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));let i=function(e,r,o){var n,i,u;if(s.randomUUID&&!r&&!e)return s.randomUUID();let c=null!=(u=null!=(i=(e=e||{}).random)?i:null==(n=e.rng)?void 0:n.call(e))?u:function(){if(!t){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");t=crypto.getRandomValues.bind(crypto)}return t(a)}();if(c.length<16)throw Error("Random bytes length must be >= 16");if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,r){if((o=o||0)<0||o+16>r.length)throw RangeError("UUID byte range ".concat(o,":").concat(o+15," is out of buffer bounds"));for(let e=0;e<16;++e)r[o+e]=c[e];return r}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}(c)};var u=e.i(92760),c=e.i(55311);function d(){let[e,t]=(0,o.useState)(""),[s,a]=(0,o.useState)(!1),[l,d]=(0,o.useState)(null),[f,m]=(0,o.useState)(!1),[p,g]=(0,o.useState)(""),[h,b]=(0,o.useState)(""),[y,x]=(0,o.useState)(null),v=(0,n.useRouter)(),w=async t=>{if(t.preventDefault(),a(!0),d(null),!e.trim()){d("Name is required"),a(!1);return}let r=i();c.default.set("guestId",r),c.default.set("guestName",e),m(!0),a(!1)},S=async e=>{var t;if(e.preventDefault(),a(!0),d(null),!p.trim()){d("Session name is required"),a(!1);return}let r=Math.random().toString(36).substring(2,8).toUpperCase(),o=c.default.get("guestId"),{data:n,error:s}=await (0,u.createSession)({name:p,invite_code:r,moderator_id:o||""});if(s){d(s.message),a(!1);return}a(!1),v.push("/session/".concat((null==n||null==(t=n[0])?void 0:t.invite_code)||r))},j=async e=>{if(e.preventDefault(),x(null),a(!0),!h.trim()){x("Invite code is required"),a(!1);return}let{data:t,error:r}=await (0,u.getSessionByInviteCode)(h);if(r||!t){x("Session not found."),a(!1);return}a(!1),v.push("/session/".concat(h))};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-900 via-purple-900 to-blue-900",children:(0,r.jsxs)("div",{className:"bg-[#181f3a] p-10 sm:p-12 rounded-2xl shadow-2xl w-full max-w-xl text-center border border-blue-900/40",children:[(0,r.jsx)("h2",{className:"text-3xl font-extrabold mb-6 text-white drop-shadow-lg",children:"Join as Guest"}),f?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("form",{onSubmit:S,className:"mb-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Session Name",value:p,onChange:e=>g(e.target.value),className:"w-full mb-4 p-3 rounded-lg bg-[#232a4d] text-white border border-blue-900/30 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0}),(0,r.jsx)("button",{type:"submit",className:"w-full py-3 rounded-lg bg-gradient-to-r from-yellow-400 to-orange-400 text-gray-900 font-semibold shadow hover:from-yellow-500 hover:to-orange-500 transition",disabled:s,children:s?"Creating...":"Create Session"})]}),(0,r.jsxs)("form",{onSubmit:j,children:[(0,r.jsx)("input",{type:"text",placeholder:"Invite Code",value:h,onChange:e=>b(e.target.value.toUpperCase()),className:"w-full mb-4 p-3 rounded-lg bg-[#232a4d] text-white border border-blue-900/30 focus:outline-none focus:ring-2 focus:ring-cyan-500 uppercase",required:!0}),(0,r.jsx)("button",{type:"submit",className:"w-full py-3 rounded-lg bg-gradient-to-r from-cyan-400 to-blue-400 text-white font-semibold shadow hover:from-cyan-500 hover:to-blue-500 transition",disabled:s,children:s?"Joining...":"Join Session"}),y&&(0,r.jsx)("p",{className:"text-red-500 mt-4",children:y})]})]})}):(0,r.jsxs)("form",{onSubmit:w,children:[(0,r.jsx)("input",{type:"text",placeholder:"Your Name",value:e,onChange:e=>t(e.target.value),className:"w-full mb-4 p-3 rounded-lg bg-[#232a4d] text-white border border-blue-900/30 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0}),(0,r.jsx)("button",{type:"submit",className:"w-full py-3 rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold shadow hover:from-purple-600 hover:to-pink-600 transition flex items-center justify-center",disabled:s,children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-2 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),"Joining..."]}):"Join"}),l&&(0,r.jsx)("p",{className:"text-red-500 mt-4",children:l})]})]})})}},11737,e=>{e.v(e=>Promise.resolve().then(()=>e(6085)))}]);