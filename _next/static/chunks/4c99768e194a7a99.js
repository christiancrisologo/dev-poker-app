(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6085,e=>{"use strict";e.s(["Headers",()=>n,"Request",()=>r,"Response",()=>l,"default",()=>a,"fetch",()=>t]);var s="undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g;let t=s.fetch,a=s.fetch.bind(s),n=s.Headers,r=s.Request,l=s.Response},60589,e=>{"use strict";e.s(["default",()=>n]);var s=e.i(43476),t=e.i(71645),a=e.i(84515);function n(e){let{sessionId:n,currentStoryName:r,status:l,onStatusChange:o}=e,[d,i]=(0,t.useState)(r||""),[u,c]=(0,t.useState)(!1),[b,p]=(0,t.useState)(null),m=async()=>{c(!0),p(null);let{error:e}=await a.supabase.from("sessions").update({status:"voting",current_story_name:d}).eq("id",n);e&&p(e.message),c(!1),null==o||o()},h=async()=>{c(!0),p(null);let{error:e}=await a.supabase.from("sessions").update({status:"revealed"}).eq("id",n);e&&p(e.message),c(!1),null==o||o()},g=async()=>{c(!0),p(null);let{error:e}=await a.supabase.from("votes").delete().eq("session_id",n),{error:s}=await a.supabase.from("participants").update({status:"joined"}).eq("session_id",n),{error:t}=await a.supabase.from("sessions").update({status:"lobby",current_story_name:null}).eq("id",n);(e||s||t)&&p("Error resetting round"),c(!1),null==o||o()};return(0,s.jsxs)("div",{className:"bg-gray-100 p-4 rounded mb-6",children:[(0,s.jsx)("h3",{className:"font-bold mb-2",children:"Moderator Controls"}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)("input",{type:"text",placeholder:"Story Name",value:d,onChange:e=>i(e.target.value),className:"p-2 border rounded w-full"})}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:m,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",disabled:u||"voting"===l,children:"Start Round"}),(0,s.jsx)("button",{onClick:h,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",disabled:u||"voting"!==l,children:"Reveal Votes"}),(0,s.jsx)("button",{onClick:g,className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",disabled:u,children:"Reset Round"})]}),b&&(0,s.jsx)("p",{className:"text-red-500 mt-2",children:b})]})}},11737,e=>{e.v(e=>Promise.resolve().then(()=>e(6085)))}]);