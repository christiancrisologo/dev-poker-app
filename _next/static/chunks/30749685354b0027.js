(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6085,e=>{"use strict";e.s(["Headers",()=>r,"Request",()=>i,"Response",()=>a,"default",()=>n,"fetch",()=>t]);var s="undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g;let t=s.fetch,n=s.fetch.bind(s),r=s.Headers,i=s.Request,a=s.Response},18566,(e,s,t)=>{s.exports=e.r(76562)},92760,e=>{"use strict";e.s(["createSession",()=>n,"createUser",()=>i,"getParticipants",()=>o,"getSessionByInviteCode",()=>r,"getUser",()=>a,"signIn",()=>t]);var s=e.i(84515);async function t(e,t){return s.supabase.auth.signInWithPassword({email:e,password:t})}async function n(e){let{name:t,invite_code:n,moderator_id:r}=e;return s.supabase.from("poker_sessions").insert({name:t,invite_code:n,moderator_id:r}).select("invite_code")}async function r(e){return s.supabase.from("poker_sessions").select("*").eq("invite_code",e).single()}async function i(e){let{username:t}=e;return s.supabase.from("poker_users").insert({username:t})}async function a(e){return s.supabase.from("poker_users").select("*").eq("username",e)}async function o(e){return s.supabase.from("poker_participants").select("*").eq("session_id",e)}},30314,e=>{"use strict";e.s(["default",()=>a],30314);var s=e.i(43476),t=e.i(71645),n=e.i(18566),r=e.i(92760);function i(){let e=(0,n.useSearchParams)(),[i,a]=(0,t.useState)(""),[o,l]=(0,t.useState)(!1),[u,c]=(0,t.useState)(null),[d,m]=(0,t.useState)(null),[f,p]=(0,t.useState)(!0),h=e.get("user_id")||"",g=(0,n.useRouter)(),x=async e=>{e.preventDefault(),l(!0),c(null),m(null),p(!1);let s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;return Math.random().toString(36).substring(2,2+e).toUpperCase()}(),t=(await (0,r.getUser)(i)).data,n=t&&t.length>0?t[0].id:null;if(!n){c("You must be logged in as moderator."),l(!1),p(!0);return}let{data:a,error:o}=await (0,r.createSession)({name:i,invite_code:s,moderator_id:n});if(o)c(o.message),l(!1),p(!0);else{var u;m((null==a||null==(u=a[0])?void 0:u.invite_code)||s),l(!1),g.push("/session?invite_code=".concat(d,"&user_id=").concat(h))}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-900 via-purple-900 to-blue-900",children:(0,s.jsxs)("div",{className:"bg-[#181f3a] p-10 sm:p-12 rounded-2xl shadow-2xl w-full max-w-xl text-center border border-blue-900/40",children:[(0,s.jsx)("h2",{className:"text-3xl font-extrabold mb-6 text-white drop-shadow-lg",children:"Create Session"}),(0,s.jsxs)("form",{onSubmit:x,children:[(0,s.jsx)("input",{type:"text",placeholder:"Session Name",value:i,onChange:e=>a(e.target.value),className:"w-full input",required:!0}),(0,s.jsx)("button",{type:"submit",className:"w-full btn",disabled:o,children:o?"Creating...":"Create Session"})]}),u&&(0,s.jsx)("p",{className:"text-red-500 mt-4",children:u}),d&&(0,s.jsxs)("div",{className:"mt-6 p-4 rounded-lg bg-gradient-to-r from-green-400 to-blue-400 text-white",children:[(0,s.jsx)("p",{className:"font-semibold",children:"Invite Code:"}),(0,s.jsx)("p",{className:"text-xl font-mono",children:d})]}),f&&(0,s.jsx)("div",{className:"mt-8"})]})})}function a(){return(0,s.jsx)(t.default.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-900 via-purple-900 to-blue-900",children:(0,s.jsx)("div",{className:"text-theme-heading text-2xl",children:"Loading..."})}),children:(0,s.jsx)(i,{})})}},11737,e=>{e.v(e=>Promise.resolve().then(()=>e(6085)))}]);