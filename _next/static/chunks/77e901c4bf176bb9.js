(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6085,e=>{"use strict";e.s(["Headers",()=>s,"Request",()=>o,"Response",()=>a,"default",()=>n,"fetch",()=>r]);var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g;let r=t.fetch,n=t.fetch.bind(t),s=t.Headers,o=t.Request,a=t.Response},18566,(e,t,r)=>{t.exports=e.r(76562)},92760,e=>{"use strict";e.s(["createSession",()=>n,"createUser",()=>o,"getParticipants",()=>i,"getSessionByInviteCode",()=>s,"getUser",()=>a,"signIn",()=>r]);var t=e.i(84515);async function r(e,r){return t.supabase.auth.signInWithPassword({email:e,password:r})}async function n(e){let{name:r,invite_code:n,moderator_id:s}=e;return t.supabase.from("poker_sessions").insert({name:r,invite_code:n,moderator_id:s}).select("invite_code")}async function s(e){return t.supabase.from("poker_sessions").select("*").eq("invite_code",e).single()}async function o(e){let{username:r}=e;return t.supabase.from("poker_users").insert({username:r})}async function a(e){return t.supabase.from("poker_users").select("*").eq("username",e)}async function i(e){return t.supabase.from("poker_participants").select("*").eq("session_id",e)}},61822,e=>{"use strict";e.s(["userStore",()=>a],61822);var t=e.i(71645);let r=e=>{let t,r=new Set,n=(e,n)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=n?n:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,o={setState:n,getState:s,getInitialState:()=>a,subscribe:e=>(r.add(e),()=>r.delete(e))},a=t=e(n,s,o);return o},n=e=>e,s=e=>{let s=(e=>e?r(e):r)(e),o=e=>(function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,s=t.default.useSyncExternalStore(e.subscribe,t.default.useCallback(()=>r(e.getState()),[e,r]),t.default.useCallback(()=>r(e.getInitialState()),[e,r]));return t.default.useDebugValue(s),s})(s,e);return Object.assign(o,s),o},o=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>o(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>o(t)(e)}}},a=(e=>e?s(e):s)()(((e,t)=>(r,n,s)=>{let a,i={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let n=e=>null===e?null:JSON.parse(e,void 0),s=null!=(t=r.getItem(e))?t:null;return s instanceof Promise?s.then(n):n(s)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},l=!1,u=new Set,d=new Set,c=i.storage;if(!c)return e(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];console.warn("[zustand persist middleware] Unable to update item '".concat(i.name,"', the given storage is currently unavailable.")),r(...t)},n,s);let f=()=>{let e=i.partialize({...n()});return c.setItem(i.name,{state:e,version:i.version})},m=s.setState;s.setState=(e,t)=>(m(e,t),f());let g=e(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(...t),f()},n,s);s.getInitialState=()=>g;let p=()=>{var e,t;if(!c)return;l=!1,u.forEach(e=>{var t;return e(null!=(t=n())?t:g)});let s=(null==(t=i.onRehydrateStorage)?void 0:t.call(i,null!=(e=n())?e:g))||void 0;return o(c.getItem.bind(c))(i.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===i.version)return[!1,e.state];else{if(i.migrate){let t=i.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[s,o]=e;if(r(a=i.merge(o,null!=(t=n())?t:g),!0),s)return f()}).then(()=>{null==s||s(a,void 0),a=n(),l=!0,d.forEach(e=>e(a))}).catch(e=>{null==s||s(void 0,e)})};return s.persist={setOptions:e=>{i={...i,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>l,onHydrate:e=>(u.add(e),()=>{u.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},i.skipHydration||p(),a||g})(e=>({user:null,session:null,setUser:t=>e({user:t}),setSession:t=>e({session:t}),clear:()=>e({user:null,session:null})}),{name:"poker-dev-storage",partialize:e=>({user:e.user,session:e.session})}))},17360,e=>{"use strict";let t;e.s(["default",()=>c],17360);var r=e.i(43476),n=e.i(71645),s=e.i(18566);let o={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},a=new Uint8Array(16),i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));let l=function(e,r,n){var s,l,u;if(o.randomUUID&&!r&&!e)return o.randomUUID();let d=null!=(u=null!=(l=(e=e||{}).random)?l:null==(s=e.rng)?void 0:s.call(e))?u:function(){if(!t){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");t=crypto.getRandomValues.bind(crypto)}return t(a)}();if(d.length<16)throw Error("Random bytes length must be >= 16");if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,r){if((n=n||0)<0||n+16>r.length)throw RangeError("UUID byte range ".concat(n,":").concat(n+15," is out of buffer bounds"));for(let e=0;e<16;++e)r[n+e]=d[e];return r}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}(d)};var u=e.i(92760),d=e.i(61822);function c(){let[e,t]=(0,n.useState)(""),[o,a]=(0,n.useState)(!1),[i,c]=(0,n.useState)(null),[f,m]=(0,n.useState)(!1),[g,p]=(0,n.useState)(""),[h,b]=(0,n.useState)(""),[v,y]=(0,n.useState)(null),S=(0,s.useRouter)(),w=(0,d.userStore)(e=>e.setUser),x=async t=>{if(t.preventDefault(),a(!0),c(null),!e.trim()){c("Name is required"),a(!1);return}w({id:l(),name:e,type:"guest"}),m(!0),a(!1)},I=async e=>{var t;if(e.preventDefault(),a(!0),c(null),!g.trim()){c("Session name is required"),a(!1);return}let r=Math.random().toString(36).substring(2,8).toUpperCase(),n=d.userStore.getState().user,{data:s,error:o}=await (0,u.createSession)({name:g,invite_code:r,moderator_id:(null==n?void 0:n.id)||""});if(o){c(o.message),a(!1);return}a(!1);let i=(null==s||null==(t=s[0])?void 0:t.invite_code)||r;S.push("/session?invite_code=".concat(i,"&user_id=").concat(null==n?void 0:n.id))},j=async e=>{if(e.preventDefault(),y(null),a(!0),!h.trim()){y("Invite code is required"),a(!1);return}let{data:t,error:r}=await (0,u.getSessionByInviteCode)(h);if(r||!t){y("Session not found."),a(!1);return}a(!1)};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-900 via-purple-900 to-blue-900",children:(0,r.jsxs)("div",{className:"bg-[#181f3a] p-10 sm:p-12 rounded-2xl shadow-2xl w-full max-w-xl text-center border border-blue-900/40",children:[(0,r.jsx)("h2",{className:"text-3xl font-extrabold mb-6 text-white drop-shadow-lg",children:"Join as Guest"}),f?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("form",{onSubmit:I,className:"mb-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Session Name",value:g,onChange:e=>p(e.target.value),className:"w-full mb-4 p-3 rounded-lg bg-[#232a4d] text-white border border-blue-900/30 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0}),(0,r.jsx)("button",{type:"submit",className:"w-full py-3 rounded-lg bg-gradient-to-r from-yellow-400 to-orange-400 text-gray-900 font-semibold shadow hover:from-yellow-500 hover:to-orange-500 transition",disabled:o,children:o?"Creating...":"Create Session"})]}),(0,r.jsxs)("form",{onSubmit:j,children:[(0,r.jsx)("input",{type:"text",placeholder:"Invite Code",value:h,onChange:e=>b(e.target.value.toUpperCase()),className:"w-full mb-4 p-3 rounded-lg bg-[#232a4d] text-white border border-blue-900/30 focus:outline-none focus:ring-2 focus:ring-cyan-500 uppercase",required:!0}),(0,r.jsx)("button",{type:"submit",className:"w-full py-3 rounded-lg bg-gradient-to-r from-cyan-400 to-blue-400 text-white font-semibold shadow hover:from-cyan-500 hover:to-blue-500 transition",disabled:o,children:o?"Joining...":"Join Session"}),v&&(0,r.jsx)("p",{className:"text-red-500 mt-4",children:v})]})]})}):(0,r.jsxs)("form",{onSubmit:x,className:"mb-8",children:[(0,r.jsx)("input",{type:"text",placeholder:"Name",value:e,onChange:e=>t(e.target.value),className:"w-full input",required:!0}),(0,r.jsx)("button",{type:"submit",className:"w-full btn",disabled:o,children:o?"Continue as Guest...":"Continue as Guest"})]})]})})}},11737,e=>{e.v(e=>Promise.resolve().then(()=>e(6085)))}]);